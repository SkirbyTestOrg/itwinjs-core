# Making changes to the ECPresentation library

Below are instructions for library developers on how to commit, push and
publish changes to the library.

## Changing dependency package versions

After changing dependency package versions make sure you
call `rush check` to verify versions match all throughout the
repository. Failure to do so might cause different packages in the
repository to use different versions of the same packages, thus resulting
in hard to diagnose issues.

## Committing changes

It's important to generate change files when committing changes -
steps #4 - #7 do that.

1. Make some changes that you want to commit.

2. `git add .`

3. `rush change`

    Asks several questions about the changes and creates change files.

4. Review the change files created by Rush.

5. `git add .`

6. `git commit`

You can make multiple local commits before pushing the changes.

## Pushing the changes

Use [pull requests](./PULL_REQUESTS.md).

Note: before pushing it's recommended to run the `pre-publish.bat`
file - it runs the same commands as our CI job and helps to make
sure you don't forget to built / lint / test / etc.

## Publishing changes

New version of the library should be published when it reaches some
milestone. When it does, the following steps should be taken to publish
new versions:

1. `rush publish -a`

   The command does several things:
   - Generates changelogs based on change files (generated by `rush change`)
   - Increases library package versions. The new versions depend on the
   answers to `rush change` questions.
   - Updates library package dependency versions for *sample* and *test*
   packages.

2. Review the changes made by Rush.

3. `git add .`

4. `git commit -m "Applying package updates."`

5. `git push`

6. Start the `ecpresentation` CI job with the `publish` flag set to `true`.
The job builds the library, lints, tests and finally publishes it.