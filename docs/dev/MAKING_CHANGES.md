# Making changes to the ECPresentation library

Below are instructions for library developers on how to commit, push and
publish changes to the library.

## Committing changes

It's important to generate change files when committing changes -
steps #4 - #7 do that.

1. Make some changes that you want to commit.

2. ```git add .```

3. `git commit`

4. `rush change`

    Detects whether any changes were made to the backend or frontend
    packages. If yes, it asks several questions about the changes and
    creates change files.

5. Review the change files created by Rush.

6. `git add .`

7. `git commit --amend --no-edit`

    Appends the change files to your last commit.

You can make multiple local commits before pushing the changes.

## Pushing the changes

To get your code reviewed by ECPresentation team, use
[pull requests](./PULL_REQUESTS.md). If the code is already reviewed 
by other means, use `git push`.

## Publishing changes

New version of the library should be published when it reaches some
milestone. When it does, the following steps should be taken to publish
new versions:

1. `rush publish -a`

   The command does several things:
   - Generates changelogs based on change files (generated by `rush change`)
   - Increases library package versions. The new versions depend on the
   answers to `rush change` questions.
   - Updates library package dependency versions for *sample* and *test*
   packages.

2. Review the changes made by Rush.

3. `git add .`

4. `git commit -m "Applying package updates."`

5. `git push`

6. Probably temporary until a CI job is set up:

   `npm publish src/frontend`

   `npm publish src/backend`