# iModelJs Tools

A [Tool]($imodeljs-frontend.Tool) is a JavaScript class that performs an action on behalf of a user. There are several Tool types, all of which are implemented by subclassing various classes in the Tool class hierarchy.

* Immediate Tools execute their assigned tasks immediately without affecting the active tool, and are implemented as subclasses of ImmediateTool.
* Viewing Tools (such as zoom, pan, and view rotation) pause the active tool while they are executing and resume the active tool when finished. They are implemented as subclasses of ViewTool.
* Interactive Tools are used for graphical interactions with the IModel. When invoked, they become the active tool, reacting to user input such as data points, mouse movements, gestures, keystrokes, and resets. Interactive Tools are the most flexible Tool type, but they are also the most challenging to implement. iModelJS provides some specializations of Interactive Tool that are easier to implement.
* Primitive Tools are simplified Interactive Tools that are used to place elements in the design when there is no need locate existing elements. They are implemented as subclass of PrimitiveTool.

The iModelJs core package provides a comprehensive set of Viewing Tools, so most iModelJs applications do not need to implement their own.

iModelJS also provides a Select Tool, which allows users to select existing elements and interact with them through EditorManipulators that are provided by the element handlers. Providing a capable EditorManipulator for an element often eliminates the need for  modification tools specific to that element type.

It is important to make user actions that result in changes to your application state happen through Tool invocation (ImmediateTools are very handy for this), because Tool invocations can be recorded for testing, or for playback through macros.

## Tool Invocation

Users generally invoke Tools by clicking on their associated icons, or occasionally by using the Command Parser. Tools can be invoked programmatically using the ToolRegistry.run method, which takes the toolId as its first argument and then allows optional arguments that are passed both to the Tools constructor and to its run method.

## ToolAdmin

The ToolAdmin class supervises the collection of low-level input from the view windows (button events, raw motion events, and gestures in screen coordinates, timer events, keystrokes, etc.); interprets those inputs into high-level events that Tools can readily process (data points, motion events, etc., in iModelJs coordinates, with the appropriate locks and Accudraw corrections applied); and routes those inputs to the appropriate Tool.

Routing of the interpreted, high-level events is as follows:

* If there is an active tool, the events are directed to it. The active tool can either handle a particular event or ignore it.
* If the active tool does not handle a particular event, it is directed to the IdleTool. The standard iModelJs IdleTool looks for inputs that initiate viewing tools. For desktop computers, pressing the middle button starts the pan operation, rolling the wheel starts a zoom in or out, shift-middle button starts the rotate command, and a double click on the middle button fits the current view. On touch devices, pinch is used to zoom, a two-finger drag pans the view, a single finger drag rotates the view, and a double tap fits the current view.

As mentioned above a ViewTool can temporarily interrupt an InteractiveTool. The ToolAdmin handles that sequence transparently such that the InteractiveTool does not have to be aware of the interruption.
